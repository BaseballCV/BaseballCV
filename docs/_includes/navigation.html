# docs/_includes/navigation.html
<nav role="navigation" aria-label="Main navigation">
  <ul class="navigation-list">
    {%- assign ordered_pages_list = site.html_pages | where_exp:"item", "item.nav_order != nil" -%}
    {%- assign unordered_pages_list = site.html_pages | where_exp:"item", "item.nav_order == nil" -%}
    {%- assign sorted_ordered_pages_list = ordered_pages_list | sort:"nav_order" -%}
    {%- assign sorted_unordered_pages_list = unordered_pages_list | sort:"title" -%}
    {%- assign pages_list = sorted_ordered_pages_list | concat: sorted_unordered_pages_list -%}

    {%- for node in pages_list -%}
      {%- unless node.nav_exclude -%}
        {%- if node.parent == nil and node.has_children -%}
          <li class="navigation-list-item{% if page.parent == node.title or page.grand_parent == node.title %} active{% endif %}">
            <a href="{{ node.url | absolute_url }}" class="navigation-list-link{% if page.url == node.url %} active{% endif %}">{{ node.title }}</a>
            {%- if node.has_children -%}
              {%- assign children_list = pages_list | where: "parent", node.title -%}
              <ul class="navigation-list-child-list">
                {%- for child in children_list -%}
                  <li class="navigation-list-item {% if page.url == child.url or page.parent == child.title %} active{% endif %}">
                    <a href="{{ child.url | absolute_url }}" class="navigation-list-link{% if page.url == child.url %} active{% endif %}">{{ child.title }}</a>
                  </li>
                {%- endfor -%}
              </ul>
            {%- endif -%}
          </li>
        {%- endif -%}
      {%- endunless -%}
    {%- endfor -%}
  </ul>
</nav>